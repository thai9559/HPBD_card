<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√∫c M·ª´ng Sinh Nh·∫≠t</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1 class="title">Ch√∫c M·ª´ng Sinh Nh·∫≠t Anh K√≠nh!</h1>
        <p class="message">Ch√∫c anh m·ªôt tu·ªïi m·ªõi tr√†n ƒë·∫ßy ni·ªÅm vui, s·ª©c kh·ªèe v√† th√†nh c√¥ng! üéâüéÇ</p>
        <button class="btn">Nh·∫≠n qu√† üéâ</button>
        <div id="moneyEffect"></div>
    </div>

    <!-- Bong b√≥ng ·∫©n v·ªõi c√¢u ch√∫c -->
    <div id="bubbleContainer" class="bubble-container">
        <!-- Bong b√≥ng s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
    </div>

    <!-- Audio Elements -->
    <audio id="popSound" preload="auto">
        <source
            src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"
            type="audio/wav">
    </audio>
    <!-- Nh·∫°c n·ªÅn Happy Birthday (local file) -->
    <audio id="bgMusic" loop preload="auto">
        <source src="music.mp3" type="audio/mp3">
    </audio>
    <!-- N√∫t b·∫≠t/t·∫Øt nh·∫°c -->
    <button id="musicToggle" class="music-toggle" title="B·∫≠t/T·∫Øt nh·∫°c" aria-label="B·∫≠t/T·∫Øt nh·∫°c">
        <span id="musicIcon">üîä</span>
    </button>

    <script>
        const button = document.querySelector('.btn');
        const moneyEffectContainer = document.getElementById('moneyEffect');
        const bubbleContainer = document.getElementById('bubbleContainer');
        const popSound = document.getElementById('popSound');
        const bgMusic = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        const musicIcon = document.getElementById('musicIcon');

        // T·ª± ƒë·ªông ph√°t nh·∫°c khi user t∆∞∆°ng t√°c ƒë·∫ßu ti√™n
        let musicStarted = false;
        function tryPlayMusic() {
            if (!musicStarted) {
                bgMusic.volume = 0.5;
                bgMusic.play().catch(() => { });
                musicStarted = true;
                musicIcon.textContent = 'üîä';
            }
        }
        // Ph√°t nh·∫°c khi user click b·∫•t k·ª≥ ƒë√¢u l·∫ßn ƒë·∫ßu
        window.addEventListener('click', tryPlayMusic, { once: true });

        // N√∫t b·∫≠t/t·∫Øt nh·∫°c
        musicToggle.addEventListener('click', function (e) {
            e.stopPropagation();
            if (bgMusic.paused) {
                bgMusic.play();
                musicIcon.textContent = 'üîä';
            } else {
                bgMusic.pause();
                musicIcon.textContent = 'üîá';
            }
        });

        // D·ªØ li·ªáu c√°c bong b√≥ng v·ªõi c√¢u ch√∫c
        const bubbleImages = [
            'image.jpg',
            'image_2.jpg',
            'image_3.jpg',
            'image_4.jpg',
            'image_5.jpg',
            'image_6.jpg'
        ];
        const bubbleData = [
            {
                icon: 'üéÇ',
                title: 'B√°nh Kem',
                message: 'Ch√∫c anh m·ªôt tu·ªïi m·ªõi ng·ªçt ng√†o nh∆∞ b√°nh kem, ƒë·∫ßy ni·ªÅm vui v√† th√†nh c√¥ng!'
            },
            {
                icon: 'üíù',
                title: 'T√¨nh Y√™u',
                message: 'Mong anh lu√¥n ƒë∆∞·ª£c y√™u qu√Ω v√† t√¥n tr·ªçng, cu·ªôc s·ªëng l√∫c n√†o c≈©ng tr√†n ƒë·∫ßy ni·ªÅm vui.'
            },
            {
                icon: 'üí™',
                title: 'S·ª©c Kh·ªèe',
                message: 'Ch√∫c anh lu√¥n kh·ªèe m·∫°nh, tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng ƒë·ªÉ ti·∫øp t·ª•c chinh ph·ª•c m·ªçi th·ª≠ th√°ch.'
            },
            {
                icon: 'üéØ',
                title: 'Th√†nh C√¥ng',
                message: 'Mong anh s·∫Ω ƒë·∫°t ƒë∆∞·ª£c t·∫•t c·∫£ m·ª•c ti√™u v√† lu√¥n v∆∞∆°n t·ªõi nh·ªØng ƒë·ªânh cao m·ªõi!'
            },
            {
                icon: 'üí∞',
                title: 'T√†i L·ªôc',
                message: 'Ch√∫c anh nƒÉm nay l√†m ƒÉn ph√°t ƒë·∫°t, ti·ªÅn v√¥ nh∆∞ n∆∞·ªõc, c√¥ng vi·ªác su√¥n s·∫ª!'
            },
            {
                icon: 'üåü',
                title: 'May M·∫Øn',
                message: 'Mong anh lu√¥n g·∫∑p nhi·ªÅu may m·∫Øn, thu·∫≠n l·ª£i trong c√¥ng vi·ªác v√† cu·ªôc s·ªëng.'
            },
            {
                icon: 'üéÅ',
                title: 'Qu√† T·∫∑ng',
                message: 'Ch√∫c anh nh·∫≠n ƒë∆∞·ª£c th·∫≠t nhi·ªÅu m√≥n qu√† √Ω nghƒ©a v√† nh·ªØng ƒëi·ªÅu b·∫•t ng·ªù th√∫ v·ªã!'
            },
            {
                icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
                title: 'Gia ƒê√¨nh',
                message: 'Mong gia ƒë√¨nh anh lu√¥n h·∫°nh ph√∫c, ·∫•m √™m v√† lu√¥n b√™n anh trong m·ªçi b∆∞·ªõc ƒë∆∞·ªùng.'
            },
            {
                icon: '‚öΩ',
                title: 'B√≥ng ƒê√°',
                message: 'Ch√∫c ƒë·ªôi b√≥ng m√†u xanh m√πa sau s·∫Ω ·∫µm c√∫p!'
            }
        ];

        // G√°n ·∫£nh cho t·ª´ng bong b√≥ng (lu√¢n phi√™n)
        bubbleData.forEach((b, i) => b.img = bubbleImages[i % bubbleImages.length]);

        button.addEventListener('click', () => {
            createBubbles();
            createMoneyEffect();
        });

        function createBubbles() {
            bubbleContainer.innerHTML = '';

            // Ki·ªÉm tra k√≠ch th∆∞·ªõc m√†n h√¨nh ƒë·ªÉ ƒëi·ªÅu ch·ªânh
            const isMobile = window.innerWidth <= 768;
            const bubblesToShow = isMobile ? 4 : 8; // Ch·ªâ hi·ªÉn th·ªã 4 bong b√≥ng tr√™n mobile
            const bubbleSpacing = isMobile ? 120 : 200; // Kho·∫£ng c√°ch gi·ªØa c√°c bong b√≥ng

            // T·∫°o grid layout cho mobile
            if (isMobile) {
                createMobileBubbleGrid();
            } else {
                createDesktopBubbles();
            }
        }

        function createMobileBubbleGrid() {
            // T·∫°o layout 2x2 cho mobile
            const positions = [
                { x: 50, y: 100 },   // G√≥c tr√™n tr√°i
                { x: window.innerWidth - 130, y: 100 }, // G√≥c tr√™n ph·∫£i
                { x: 50, y: window.innerHeight - 200 }, // G√≥c d∆∞·ªõi tr√°i
                { x: window.innerWidth - 130, y: window.innerHeight - 200 } // G√≥c d∆∞·ªõi ph·∫£i
            ];

            // Ch·ªâ s·ª≠ d·ª•ng 4 bong b√≥ng ƒë·∫ßu ti√™n
            const mobileBubbleData = bubbleData.slice(0, 4);

            mobileBubbleData.forEach((data, index) => {
                const bubble = document.createElement('div');
                bubble.className = 'bubble mobile-bubble';
                bubble.innerHTML = `
                    <div class="bubble-icon">${data.icon}</div>
                    <div class="bubble-content">
                        <h3>${data.title}</h3>
                        <p>${data.message}</p>
                    </div>
                `;

                const pos = positions[index];
                bubble.style.left = pos.x + 'px';
                bubble.style.top = pos.y + 'px';
                bubble.style.animationDelay = (index * 0.2) + 's';

                bubble.addEventListener('click', () => {
                    popBubble(bubble, data);
                });

                bubbleContainer.appendChild(bubble);
            });
        }

        function createDesktopBubbles() {
            bubbleData.forEach((data, index) => {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.innerHTML = `
                    <div class="bubble-icon">${data.icon}</div>
                    <div class="bubble-content">
                        <h3>${data.title}</h3>
                        <p>${data.message}</p>
                    </div>
                `;

                // Random position v·ªõi kho·∫£ng c√°ch t·ªëi thi·ªÉu
                const randomX = Math.random() * (window.innerWidth - 200);
                const randomY = Math.random() * (window.innerHeight - 200);

                bubble.style.left = randomX + 'px';
                bubble.style.top = randomY + 'px';
                bubble.style.animationDelay = (index * 0.3) + 's';

                bubble.addEventListener('click', () => {
                    popBubble(bubble, data);
                });

                bubbleContainer.appendChild(bubble);
            });
        }

        function popBubble(bubble, data) {
            // Ph√°t √¢m thanh n·ªï bong b√≥ng
            playPopSound();

            // T·∫°o hi·ªáu ·ª©ng n·ªï
            const popEffect = document.createElement('div');
            popEffect.className = 'pop-effect';
            popEffect.innerHTML = `
                <div class="pop-img-wrap"><img src="${data.img}" class="pop-img" alt="·∫¢nh ch√∫c m·ª´ng"></div>
                <div class="pop-icon">${data.icon}</div>
                <div class="pop-message">${data.message}</div>
            `;

            const rect = bubble.getBoundingClientRect();
            popEffect.style.left = rect.left + 'px';
            popEffect.style.top = rect.top + 'px';

            document.body.appendChild(popEffect);

            // X√≥a bong b√≥ng
            bubble.remove();

            // T·∫°o hi·ªáu ·ª©ng fireworks
            createFireworks(rect.left + rect.width / 2, rect.top + rect.height / 2);

            // T·∫°o hi·ªáu ·ª©ng ti·ªÅn nh·ªè t·∫°i v·ªã tr√≠ n·ªï
            createSmallMoneyEffect(rect.left, rect.top);

            // X√≥a hi·ªáu ·ª©ng n·ªï sau 3 gi√¢y
            setTimeout(() => {
                popEffect.remove();
            }, 3000);
        }

        function playPopSound() {
            try {
                popSound.currentTime = 0;
                popSound.play().catch(e => console.log('Audio play failed:', e));
            } catch (e) {
                console.log('Audio error:', e);
            }
        }

        function createFireworks(x, y) {
            const colors = ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8'];

            // T·∫°o nhi·ªÅu particle cho fireworks
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework-particle';

                const angle = (i * 18) * Math.PI / 180; // 360/20 = 18 degrees
                const velocity = 50 + Math.random() * 50;
                const finalX = x + Math.cos(angle) * velocity;
                const finalY = y + Math.sin(angle) * velocity;

                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.backgroundColor = randomColor;

                particle.style.left = x + 'px';
                particle.style.top = y + 'px';

                document.body.appendChild(particle);

                // Animate particle
                setTimeout(() => {
                    particle.style.left = finalX + 'px';
                    particle.style.top = finalY + 'px';
                    particle.style.opacity = '0';
                    particle.style.transform = 'scale(0)';
                }, 50);

                // Remove particle
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.remove();
                    }
                }, 1500);
            }
        }

        function createSmallMoneyEffect(x, y) {
            for (let i = 0; i < 8; i++) {
                const money = document.createElement('div');
                money.classList.add('small-money');
                money.textContent = 'üíµ';

                const angle = (i * 45) * Math.PI / 180;
                const distance = 50;
                const finalX = x + Math.cos(angle) * distance;
                const finalY = y + Math.sin(angle) * distance;

                money.style.left = x + 'px';
                money.style.top = y + 'px';

                moneyEffectContainer.appendChild(money);

                // Animate to final position
                setTimeout(() => {
                    money.style.left = finalX + 'px';
                    money.style.top = finalY + 'px';
                    money.style.opacity = '0';
                }, 100);

                // Remove after animation
                setTimeout(() => {
                    money.remove();
                }, 2000);
            }
        }

        function createMoneyEffect() {
            // T·∫°o nhi·ªÅu ti·ªÅn h∆°n - 50 t·ªù ti·ªÅn
            for (let i = 0; i < 50; i++) {
                const money = document.createElement('div');
                money.classList.add('money');

                // S·ª≠ d·ª•ng nhi·ªÅu lo·∫°i ti·ªÅn kh√°c nhau
                const moneyTypes = ['üíµ', 'üí∞', 'üíé', 'üèÜ', '‚≠ê', 'üéÅ', 'üíñ', 'üåü'];
                const randomMoneyType = moneyTypes[Math.floor(Math.random() * moneyTypes.length)];
                money.textContent = randomMoneyType;

                // Randomize initial position - ti·ªÅn xu·∫•t hi·ªán t·ª´ d∆∞·ªõi l√™n
                const randomX = Math.random() * window.innerWidth;
                const randomY = window.innerHeight + Math.random() * 100; // B·∫Øt ƒë·∫ßu t·ª´ d∆∞·ªõi m√†n h√¨nh

                money.style.left = randomX + 'px';
                money.style.bottom = randomY + 'px';

                // Randomize animation duration v√† delay
                const duration = Math.random() * 3 + 2; // 2-5 gi√¢y
                const delay = Math.random() * 2; // Delay 0-2 gi√¢y
                money.style.animationDuration = duration + 's';
                money.style.animationDelay = delay + 's';

                // Randomize k√≠ch th∆∞·ªõc
                const size = Math.random() * 20 + 20; // 20-40px
                money.style.fontSize = size + 'px';

                // Randomize m√†u s·∫Øc
                const colors = ['#FFD700', '#FFA500', '#FF6347', '#32CD32', '#FF69B4', '#00CED1'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                money.style.color = randomColor;

                moneyEffectContainer.appendChild(money);

                // Remove the money element after animation ends
                setTimeout(() => {
                    if (money.parentNode) {
                        money.remove();
                    }
                }, (duration + delay + 1) * 1000);
            }
        }

        // T·ª± ƒë·ªông t·∫°o hi·ªáu ·ª©ng ti·ªÅn khi trang web load
        window.addEventListener('load', () => {
            setTimeout(() => {
                createMoneyEffect();
            }, 2000);
        });
    </script>
</body>

</html>